var jform={config:{initAlert:"Заполните это поле",correctAlert:"Заполните поле корректно",rusAlert:"Введите русские буквы",emptyClass:"jform-empty-field",errorClass:"jform-red-input",sitekeyRecap:"6LfUbxoUAAAAAM8_ZIbd0PZSDAq203IUaZ1b5sas"},closeWindowRefresh:function(){location.href=window.location.href},closeWindowToggle:function(){$(".jform-overlay").fadeOut("fast"),$("body,html").removeClass("noscroll")},removeNotice:function(e){e.removeClass(this.config.emptyClass).removeClass(this.config.errorClass).next().remove()},addNotice:function(e,s){e.addClass(this.config.emptyClass).addClass(this.config.errorClass),e.next().remove(),e.parent().append('<div class="jform-notice">'+s+"</div>")},checkInput:function(e,s){var i=this;s?s.hasClass("js-rfield")&&i.checkSingleInput(s):$(e).find(".js-rfield").each(function(){i.checkSingleInput($(this))})},checkSingleInput:function(e){""!=e.val()?(this.removeNotice(e),e.hasClass("js-tele")?this.checkInputPattern(e,/^((8|\+7)[\- ]?)?(\(?\d{3}\)?[\- ]?)?[\d\- ]{7,10}$/,this.config.correctAlert):e.hasClass("js-email")?this.checkInputPattern(e,/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i,this.config.correctAlert):e.hasClass("js-rus")&&this.checkInputPattern(e,/^[а-яА-ЯёЁ]/,this.config.rusAlert)):this.addNotice(e,this.config.initAlert)},checkInputPattern:function(e,s,i){""!=e.val()?s.test(e.val())?this.removeNotice(e):this.addNotice(e,i):this.addNotice(e,this.config.initAlert)},getTemplateWrap:function(e,s,i,t){return'<div id="jform"><div class="jform-overlay"><div class="jform-wrap clwsh"><span class="jform-title">'+e+'</span><form class="jform-form" method="post">'+t+'<div class="jform-error"></div><div id="jrecaptcha"></div>\x3c!--<input placeholder="Ваш телефон" type="file" name="file" id="file" class="">--\x3e<div class="jform-wrap-polity"><label for="polity_check" style="display:inline"><input name="polity_check" id="polity_check" size="30" class="jform-check jform-polity-check" type="checkbox" value="1" checked=""><span class="jform-podlog"></span>Согласие на обработку <a href="policy">персональных данных</a></label></div><span id="submit_form" class="jform-btn js-send-jform">'+s+'</span><input type="hidden" name="action" id="action" value="'+i+'"><input type="text" name="address" id="address" class="js-requared" value=""></form><div class="jform-result"></div><div class="jform-close">×</div></div></div></div>'},getTemplateInputWrap:function(e){var s,i="";for(s=0;s<e.length;++s)i+='<div class="jform-wrap-input"><input placeholder="'+e[s].placeholder+'" type="text" name="'+e[s].name+'" id="'+e[s].name+'" class="jform-input '+e[s].listClass+'"></div>';return i},openWindow:function(e,s){var i,t;if(1==e){var o=this.getTemplateInputWrap([{name:"name",placeholder:"Ваше имя",listClass:"js-rfield"},{name:"phone",placeholder:"Ваш телефон",listClass:"js-rfield js-tele"},{name:"email",placeholder:"Ваш email",listClass:"js-rfield js-email"}]);i=this.getTemplateWrap("Заказ обратного звонка","Заказать","callback",o)}this.closeRemoveWindow(),$("body,html").addClass("noscroll"),$("body").append(i),s&&(t=320<$(window).width()?"normal":"compact",grecaptcha.render("jrecaptcha",{sitekey:this.config.sitekeyRecap,theme:"light",size:t})),$("#phone").mask("+7(999)999-99-99")},closeRemoveWindow:function(){$("#jform").remove(),$("body,html").removeClass("noscroll")},sendJForm:function(s,e,i){var t="js-send-jform",o=$(s).find(".g-recaptcha-response").size();this.checkInput(s,!1);var a=$(s).find("."+this.config.emptyСlass).size();s.find("#action").val();0==a&&(i.removeClass(t),$(".jform-error").html(),$.ajax({url:"lib/mail.php",type:"post",data:$(s).serialize(),success:function(e){e.send?($(s).html('<span class="jform-text-result"><div class="icon success animate"> <span class="line tip animateSuccessTip"></span> <span class="line long animateSuccessLong"></span> <div class="placeholder"></div> <div class="fix"></div> </div>Спасибо, Ваше сообщение отправлено. Скоро мы свяжемся с Вами.</span>'),o&&grecaptcha.reset()):(o&&$(s).find(".jform-error").html(e.recap),i.addClass(t))},error:function(e){$(".jform-form").hide(),$(".jform-result").show().html('<span class="jform-text-result"><div class="icon error animateErrorIcon" style="display: block;"><span class="x-mark animateXMark"><span class="line left"></span><span class="line right"></span></span></div>Что-то пошло не так</span>'),setTimeout(this.hideError,3e3),i.addClass(t)}}))},uploadFile:function(e){if(e[0][4].files[0]){var s=e[0][4].files[0],i=new FormData;i.append("file",s),$.ajax({url:"lib/mail.php?action=upload_file",type:"post",contentType:!1,processData:!1,data:i,success:function(e){e.nameFile?$("#fileHidden").val(e.nameFile.trim()):$(".jform-result").show().html(e.send)}})}},hideError:function(e){$(".jform-form").show(),$(".jform-result").hide()},disableBtn:function(e,s){var i=e.closest("form").find(s);e.prop("checked")?i.removeAttr("readonly").css("visibility","visible"):i.attr("readonly","true").css("visibility","hidden")}};$(document).ready(function(){$(document).on("click",".jform-overlay,.jform-close",function(){jform.closeWindowToggle()}),$(document).on("click",".jform-wrap",function(e){e.stopPropagation()}),$(document).on("click",".jform-polity-check",function(){jform.disableBtn($(this),".js-send-jform")}),$(document).on("click",".js-send-jform",function(e){return e.preventDefault(),jform.sendJForm($(this).closest("form"),!0,$(this)),!1}),$(document).on("input",".jform-input",function(e){jform.checkInput(!1,$(this))}),$(".js-open-jform").click(function(){return jform.openWindow(1,!0),!1}),$(document).on("change","#file",function(e){return jform.uploadFile($(this).closest("form")),!1})});